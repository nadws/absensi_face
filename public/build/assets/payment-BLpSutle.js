import{r as t,W as v,j as r,Y as I,a as S}from"./app-uKCG8lby.js";import"./Dropdown-DA5GSs3m.js";import{T as k}from"./TextInput-sN_-O8ft.js";import{n as d}from"./numeral-CZkozHNw.js";import{P}from"./PrimaryButton-LyeoEdrO.js";import{S as E}from"./SecondaryButton-DmbLrCHY.js";import"./transition-Bjk1KgOc.js";function B({no_invoice:c,kategori:m,akun:i}){const[s,p]=t.useState([]),[u,x]=t.useState(!1),[o,f]=t.useState(1),{data:g,setData:n,post:h,errors:_,processing:j,recentlySuccessful:w}=v({id_produk:[],nominal:"0"}),l=t.useRef(s);t.useEffect(()=>{l.current!==s&&(n({id_produk:s.map(e=>e.id),nominal:"10000"}),l.current=s)},[s,n]);const b=e=>{e.preventDefault(),h(route("pos.save_payment"),{preserveScroll:!0,onSuccess:()=>{alert("Pembayaran berhasil"),localStorage.removeItem("cardItems")},onError:a=>{console.error("Error saat mengirim data:",a),alert("Pembayaran gagal, cek kembali data Anda.")}})};t.useEffect(()=>{const e=localStorage.getItem("cardItems");if(e){const a=JSON.parse(e);p(a)}},[]);const y=e=>{e.target.onerror=null,e.target.src="/image/image.png"},N=e=>{x(!u),f(e)};return r.jsxs("form",{onSubmit:b,className:"bg-[#F8F8F8] py-14 px-8  flex h-full",children:[r.jsx(I,{title:"POS Payment"}),r.jsxs("div",{className:"w-1/3 border border-gray-300 rounded-md mr-4 ",children:[r.jsx("div",{className:"border-b  p-4  bg-slate-200",children:r.jsxs("h5",{className:"font-mona font-bold text-gray-700",children:["Payment",r.jsxs("span",{className:"float-right",children:["#",c]})]})}),r.jsxs("div",{className:" overflow-y-scroll h-96",children:[s.map(e=>r.jsxs("div",{className:"flex items-center border-b pb-4 ",children:[r.jsx("img",{src:`/image/${e.foto}`,alt:"Product Image",className:"w-20 h-20 object-cover rounded",onError:y}),r.jsxs("div",{className:"ml-4 flex-1",children:[r.jsx("h2",{className:"text-lg font-semibold font-mona",children:e.nama_produk}),r.jsxs("p",{className:"text-sm text-[#F46700] font-mona",children:["Rp.",d(e.harga).format("0,0")]})]})]},e.id)),r.jsx("input",{type:"hidden",onChange:e=>n("id_produk",s.map(a=>a.id)),value:g.id_produk})]})]}),r.jsxs("div",{className:"w-2/3 border border-gray-300 rounded-md flext justify-center",children:[r.jsx("h5",{className:"text-center mt-6 font-mona text-gray-400 text-lg ",children:"Total Tagihan"}),r.jsxs("h5",{className:"text-center mt-6 font-mona  text-4xl",children:[r.jsx("span",{className:"text-sm align-top",children:"Rp "}),d(s.reduce((e,a)=>e+a.harga,0)).format("0,0")]}),r.jsx("div",{className:"flex justify-center mt-24",children:m.map(e=>r.jsx("button",{className:`py-3 px-6 border-b-2 ${o===e.id?"border-[#F46700] text-[#F46700]":""} `,onClick:a=>{a.preventDefault(),N(e.id)},children:e.kategori},e.id))}),r.jsx("div",{className:"mt-2 pt-10 px-10 xl:px-44  grid grid-cols-2 gap-3 place-items-center",children:i.map(e=>r.jsx("div",{className:`w-full ${o===e.kategori_akun_id?"":"hidden"}`,children:r.jsx(k,{type:"number",id:"nominal",className:"w-full rounded-lg h-11",placeholder:e.akun,required:!0})},e.id))}),r.jsxs("div",{className:"mt-8 bg-gray-100 border-t border-gray-300 p-4 flex justify-between items-center",children:[r.jsx(S,{href:route("pos"),children:r.jsx(E,{children:"Cancel"})}),r.jsx(P,{disabled:j,children:"Pay"})]})]})]})}export{B as default};
